<?xml version="1.0" encoding="UTF-8"?>
<!-- EN-Revision: 1.3 Maintainer: qrak Status: ready -->
<!-- $Revision$ -->
  <refentry xml:id="function.setcookie" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
   <refnamediv>
    <refname>setcookie</refname>
    <refpurpose>Wysyła ciasteczko</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Opis</title>
     <methodsynopsis>
      <type>int</type><methodname>setcookie</methodname>
      <methodparam><type>string</type><parameter>nazwa</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>wartość</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>data_ważności</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>ścieżka</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>domena</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>bezpieczne</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>setcookie</function> określa ciasteczko (ang. cookie) do
     wysłania z nagłówkami HTTP. Ciasteczko musi być wysłane <emphasis>zanim
     </emphasis> jakiekolwiek inne nagłówki zostaną wysłane (to jest
     ograniczenie ciasteczek, nie PHP). To wymaga od ciebie umieszczenia
     wywołań tej funkcji przed znacznikami <literal>&lt;html></literal> czy
     <literal>&lt;head></literal>.
    </para>
    <para>
     Wszystkie argumenty poza <parameter>nazwa</parameter> są opcjonalne.
     Jeśli tylko argument nazwa jest obecny, ciasteczko o takie nazwie zostanie
     usunięte z klienta. Możesz też opuścić argumenty za pomocą pustego łańcucha
     (<emphasis>&quot;&quot;</emphasis>). Argumenty <parameter>data_ważności
     </parameter> i <parameter>bezpieczne</parameter> są liczbami całkowitymi
     i nie można ich opuścić wstawiając pusty łańcuch. Zamiast niego użyj
     liczby zero (<emphasis>0</emphasis>). Argument 
     <parameter>data_ważności</parameter> 
     jest regularnym uniksowym znacznikiem czasu, takim jak
     zwracany przez funkcje <function>time</function> lub <function>mktime
     </function>. Argument <parameter>bezpieczne</parameter> oznacza, że
     ciasteczko może być przekazywane tylko poprzez bezpieczne połączenie HTTPS.
    </para>
    <para>
     Wysłane ciasteczko jest dostępne już przy następnym załadowaniu strony
     w tablicy <varname>$_COOKIE</varname>. W wersjach PHP do 4.1.0 była to
     tablica <varname>$HTTP_COOKIE_VARS</varname>.
    </para>
    <para>
     Częste pułapki:
     <itemizedlist>
      <listitem>
       <simpara>
        Ciasteczka nie będą widziane do następnego przeładowania strony
        dla której mają być widoczne.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        Ciasteczko może być usunięte tylko z tymi parametrami, z jakimi je
        ustawiono.
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <simpara>
     W PHP 3, wielokrotne wywołania <function>setcookie</function> w jednym
     skrypcie wykonywane były w odwrotnej kolejności. Jeśli chcesz usunąć jedno
     ciastko przed wprowadzeniem kolejnego, powinieneś umieścić wprowadzenie
     nowego przed usunęciem starego. W PHP 4, wielokrotne wywołania 
     <function>setcookie</function> wykonywane są we właściwej kolejności.
    </simpara>
    <para>
     Parę przykładów - jak wysyłać ciasteczka:
     <example>
      <title><function>setcookie</function> wysyła przykładowe ciasteczka
      </title>
      <programlisting role="php">
<![CDATA[
setcookie ("TestCookie", $value);
setcookie ("TestCookie", $value,time()+3600);  /* traci ważność za godzinę */
setcookie ("TestCookie", $value,time()+3600, "/~rasmus/", ".utoronto.ca", 1);
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Aby skasować ciasteczko, należy ustawić datę ważności na datę w
     przeszłości, co uruchomi w przeglądarce mechanizm kasowania ciasteczek.
     A teraz, jak usunąć ciasteczka z poprzedniego przykładu:
     <example>
      <title>Kasowanie ciasteczek</title>
      <programlisting role="php">
<![CDATA[
// ustaw datę ważności na godzinę wstecz
setcookie ("TestCookie", "", time() - 3600);
setcookie ("TestCookie", "", time() - 3600, "/~rasmus/", ".utoronto.ca", 1);
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Proszę zwrócić uwagę, że zawartość ciasteczka jest automatycznie kodowana
     do formatu
     URL przy wysyłaniu, a po odebraniu automatycznie dekodowana i przypisywana
     do zmiennej o tej samej nazwie co ciasteczko. Aby poznać zawartość
     przykładowego ciasteczka ze skryptu, należy zastosować poniższy przykład:
     <informalexample>
      <programlisting role="php">
<![CDATA[
echo $TestCookie;
echo $_COOKIE["TestCookie"];
]]>
      </programlisting>
     </informalexample>
    </para>
    <para>
     Można też tworzyć tablice złożone z ciasteczek za pomocą zapisu tablicowego
     w nazwie ciasteczka. Powoduje to utworzenie tylu ciasteczek, ile jest
     elemetów tablicy, a po otrzymaniu takiego ciasteczka, jego wartości
     umieszczane są w tablicy o nazwie takiej jak ciasteczko.
     <informalexample>
      <programlisting role="php">
<![CDATA[
setcookie ("cookie[three]", "cookiethree");
setcookie ("cookie[two]", "cookietwo");
setcookie ("cookie[one]", "cookieone");
if (isset ($cookie)) {
    while (list ($name, $value) = each ($cookie)) {
        echo "$name == $value&lt;br>\n";
    }
}
]]>
      </programlisting>
     </informalexample>
    </para>
    <para>
     Więcej informacji na temat ciasteczek znajduje się w specyfikacji
     Netscape'a, na stronie <link
     xlink:href="&spec.cookies;">&spec.cookies;</link>.
    </para>
    <simpara>
     Microsoft Internet Explorer 4 z zainstalowanym Service Pack 1 nie radzi
     sobie poprawnie z ciasteczkami, które mają ustawiony parametr
     <parameter>ścieżka</parameter>. 
    </simpara>
    <simpara>
     Netscape Communicator 4.05 i Microsoft Internet Explorer 3.x niepoprawnie
     obsługują ciasteczka, w których <parameter>ścieżka</parameter> i 
     <parameter>data_ważności</parameter> nie są ustawione.
    </simpara>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
