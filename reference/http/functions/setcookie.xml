<?xml version="1.0" encoding="iso-8859-2"?>
<!-- EN-Revision: 1.3 Maintainer: qrak Status: ready -->
<!-- $Revision$ -->
  <refentry xml:id="function.setcookie" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
   <refnamediv>
    <refname>setcookie</refname>
    <refpurpose>Wysy³a ciasteczko</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Opis</title>
     <methodsynopsis>
      <type>int</type><methodname>setcookie</methodname>
      <methodparam><type>string</type><parameter>nazwa</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>warto¶æ</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>data_wa¿no¶ci</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>¶cie¿ka</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>domena</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>bezpieczne</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>setcookie</function> okre¶la ciasteczko (ang. cookie) do
     wys³ania z nag³ówkami HTTP. Ciasteczko musi byæ wys³ane <emphasis>zanim
     </emphasis> jakiekolwiek inne nag³ówki zostan± wys³ane (to jest
     ograniczenie ciasteczek, nie PHP). To wymaga od ciebie umieszczenia
     wywo³añ tej funkcji przed znacznikami <literal>&lt;html></literal> czy
     <literal>&lt;head></literal>.
    </para>
    <para>
     Wszystkie argumenty poza <parameter>nazwa</parameter> s± opcjonalne.
     Je¶li tylko argument nazwa jest obecny, ciasteczko o takie nazwie zostanie
     usuniête z klienta. Mo¿esz te¿ opu¶ciæ argumenty za pomoc± pustego ³añcucha
     (<emphasis>&quot;&quot;</emphasis>). Argumenty <parameter>data_wa¿no¶ci
     </parameter> i <parameter>bezpieczne</parameter> s± liczbami ca³kowitymi
     i nie mo¿na ich opu¶ciæ wstawiaj±c pusty ³añcuch. Zamiast niego u¿yj
     liczby zero (<emphasis>0</emphasis>). Argument 
     <parameter>data_wa¿no¶ci</parameter> 
     jest regularnym uniksowym znacznikiem czasu, takim jak
     zwracany przez funkcje <function>time</function> lub <function>mktime
     </function>. Argument <parameter>bezpieczne</parameter> oznacza, ¿e
     ciasteczko mo¿e byæ przekazywane tylko poprzez bezpieczne po³±czenie HTTPS.
    </para>
    <para>
     Wys³ane ciasteczko jest dostêpne ju¿ przy nastêpnym za³adowaniu strony
     w tablicy <varname>$_COOKIE</varname>. W wersjach PHP do 4.1.0 by³a to
     tablica <varname>$HTTP_COOKIE_VARS</varname>.
    </para>
    <para>
     Czêste pu³apki:
     <itemizedlist>
      <listitem>
       <simpara>
        Ciasteczka nie bêd± widziane do nastêpnego prze³adowania strony
        dla której maj± byæ widoczne.
       </simpara>
      </listitem>
      <listitem>
       <simpara>
        Ciasteczko mo¿e byæ usuniête tylko z tymi parametrami, z jakimi je
        ustawiono.
       </simpara>
      </listitem>
     </itemizedlist>
    </para>
    <simpara>
     W PHP 3, wielokrotne wywo³ania <function>setcookie</function> w jednym
     skrypcie wykonywane by³y w odwrotnej kolejno¶ci. Je¶li chcesz usun±æ jedno
     ciastko przed wprowadzeniem kolejnego, powiniene¶ umie¶ciæ wprowadzenie
     nowego przed usunêciem starego. W PHP 4, wielokrotne wywo³ania 
     <function>setcookie</function> wykonywane s± we w³a¶ciwej kolejno¶ci.
    </simpara>
    <para>
     Parê przyk³adów - jak wysy³aæ ciasteczka:
     <example>
      <title><function>setcookie</function> wysy³a przyk³adowe ciasteczka
      </title>
      <programlisting role="php">
<![CDATA[
setcookie ("TestCookie", $value);
setcookie ("TestCookie", $value,time()+3600);  /* traci wa¿no¶æ za godzinê */
setcookie ("TestCookie", $value,time()+3600, "/~rasmus/", ".utoronto.ca", 1);
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Aby skasowaæ ciasteczko, nale¿y ustawiæ datê wa¿no¶ci na datê w
     przesz³o¶ci, co uruchomi w przegl±darce mechanizm kasowania ciasteczek.
     A teraz, jak usun±æ ciasteczka z poprzedniego przyk³adu:
     <example>
      <title>Kasowanie ciasteczek</title>
      <programlisting role="php">
<![CDATA[
// ustaw datê wa¿no¶ci na godzinê wstecz
setcookie ("TestCookie", "", time() - 3600);
setcookie ("TestCookie", "", time() - 3600, "/~rasmus/", ".utoronto.ca", 1);
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Proszê zwróciæ uwagê, ¿e zawarto¶æ ciasteczka jest automatycznie kodowana
     do formatu
     URL przy wysy³aniu, a po odebraniu automatycznie dekodowana i przypisywana
     do zmiennej o tej samej nazwie co ciasteczko. Aby poznaæ zawarto¶æ
     przyk³adowego ciasteczka ze skryptu, nale¿y zastosowaæ poni¿szy przyk³ad:
     <informalexample>
      <programlisting role="php">
<![CDATA[
echo $TestCookie;
echo $_COOKIE["TestCookie"];
]]>
      </programlisting>
     </informalexample>
    </para>
    <para>
     Mo¿na te¿ tworzyæ tablice z³o¿one z ciasteczek za pomoc± zapisu tablicowego
     w nazwie ciasteczka. Powoduje to utworzenie tylu ciasteczek, ile jest
     elemetów tablicy, a po otrzymaniu takiego ciasteczka, jego warto¶ci
     umieszczane s± w tablicy o nazwie takiej jak ciasteczko.
     <informalexample>
      <programlisting role="php">
<![CDATA[
setcookie ("cookie[three]", "cookiethree");
setcookie ("cookie[two]", "cookietwo");
setcookie ("cookie[one]", "cookieone");
if (isset ($cookie)) {
    while (list ($name, $value) = each ($cookie)) {
        echo "$name == $value&lt;br>\n";
    }
}
]]>
      </programlisting>
     </informalexample>
    </para>
    <para>
     Wiêcej informacji na temat ciasteczek znajduje siê w specyfikacji
     Netscape'a, na stronie <link
     xlink:href="&spec.cookies;">&spec.cookies;</link>.
    </para>
    <simpara>
     Microsoft Internet Explorer 4 z zainstalowanym Service Pack 1 nie radzi
     sobie poprawnie z ciasteczkami, które maj± ustawiony parametr
     <parameter>¶cie¿ka</parameter>. 
    </simpara>
    <simpara>
     Netscape Communicator 4.05 i Microsoft Internet Explorer 3.x niepoprawnie
     obs³uguj± ciasteczka, w których <parameter>¶cie¿ka</parameter> i 
     <parameter>data_wa¿no¶ci</parameter> nie s± ustawione.
    </simpara>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
