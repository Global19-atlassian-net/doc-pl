<?xml version="1.0" encoding="iso-8859-2"?>
<!-- EN-Revision: n/a Maintainer: adi Status: ready -->
<!-- $Revision$ -->
<refentry xmlns="http://docbook.org/ns/docbook" xml:id="function.fopen">
 <refnamediv>
  <refname>fopen</refname>
  <refpurpose>Otwiera plik lub URL</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>resource</type><methodname>fopen</methodname>
   <methodparam><type>string</type><parameter>nazwa_pliku</parameter></methodparam>
   <methodparam><type>string</type><parameter>tryb</parameter></methodparam>
   <methodparam choice="opt"><type>bool</type><parameter>u¿yj_include_path</parameter></methodparam>
   <methodparam choice="opt"><type>resource</type><parameter>kontekst</parameter></methodparam>
  </methodsynopsis>
  <para>
   <function>fopen</function> wi±¿e nazwany zasób, okre¶lony przez
   <parameter>nazwa_pliku</parameter>, do strumienia. 
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>nazwa_pliku</parameter></term>
     <listitem>
      <para>
       Je¶li <parameter>nazwa_pliku</parameter> jest w postaci "schemat://...", to
       przypuszczalnie jest to URL i PHP szuka protoko³u obs³ugi
       (tak¿e zwanego wrapper'em) dla tego schematu. Je¶li nie zarejestrowano
       ¿adnego wrapper'a dla tego protoko³u, PHP wyemituje notatkê, aby pomóc Tobie
       w wy¶ledzeniu potencajalnego problemu w Twoim skrypcie nastêpnie bêdzie
       kontynuowaæ z podanym <parameter>nazwa_pliku</parameter> traktuj±c go
       jako zwyk³y plik.
      </para>
      <para>
       Je¶li PHP zdecyduje, ¿e <parameter>nazwa_pliku</parameter> okre¶la
       lokalny plik, wtedy spróbuje otworzyæ strumieñ na tym pliku.
       Plik musi byæ dostêpny dla PHP, wiêc musisz zapewniæ prawa
       dostêpu do pliku pozwalaj±ce na tak± operacjê.
       Je¶li masz w³±czone  &safemode; lub  <link linkend="ini.open-basedir">open_basedir</link>
       mog± mieæ zastosowanie dodatkowe restrykcje.
      </para>
      <para>
       Je¶li PHP zdecyduje, ¿e <parameter>nazwa_pliku</parameter> okre¶la
       zarejestrowany protokó³ i ten protokó³ jest zarejestowany jako
       sieciowy URL, PHP sprawdzi <link linkend="ini.allow-url-fopen">allow_url_fopen</link>
       czy jest w³±czone. Je¶li jest wy³±czone (off), PHP wy¶wietli ostrze¿enie
       i wywo³anie fopen zakoñczy siê niepowodzeniem.
      </para>
      <note>
       <para>
        Listê obs³ugiwanych protoko³ów mo¿esz znale¼æ w <xref linkend="wrappers"/>.
        Niektóre protoko³y (równie¿ okre¶lane przez <literal>wrappery</literal> obs³uguj±
        <literal>kontekst</literal> lub/i opcje &php.ini;.
        Odwo³aj siê do konkretnej strony protoko³u aby uzyskaæ listê opcji jakie
        mog± zostaæ ustawione (np. &php.ini; warto¶æ
        <literal>user_agent</literal> u¿ywana przez wrapper <literal>http</literal>).
       </para>
      </note>
      <para>
       Na platformie Windows, dbaj aby wstawiaæ znaki ucieczki (escape)
       przed wszystkimi lewymi uko¶nikami (backslash) u¿ytymi w ¶cie¿ce do
       pliku lub u¿ywaæ uko¶ników (slash).
       <informalexample>
        <programlisting role="php">
 	 <![CDATA[
	 <?php
	 $handle = fopen("c:\\data\\info.txt", "r");
	 ?>
	 ]]>
        </programlisting>
       </informalexample>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>tryb</parameter></term>
     <listitem>  
      <para>
       Parametr <parameter>tryb</parameter> okre¶la rodzaj dostêpu jaki
       wymagasz do strumienia. Mo¿e byæ dowolny z nastêpuj±cych:
      <table>
       <title>
        Lista mo¿liwych trybów dla <function>fopen</function>
        u¿ywaj±c <parameter>tryb</parameter>
       </title>
       <tgroup cols="2">
        <thead>
         <row>
          <entry><parameter>tryb</parameter></entry>
          <entry>Opis</entry>
         </row>
        </thead>
        <tbody>
         <row>
          <entry><literal>'r'</literal></entry>
          <entry>
           Otwiera tylko do odczytu; umieszcza wska¼nik pliku na jego pocz±tku.
          </entry>
         </row>
         <row>
          <entry><literal>'r+'</literal></entry>
          <entry>
           Otwiera do odczytu i zapisu; umieszcza wska¼nik pliku na jego pocz±tku.
          </entry>
         </row>
         <row>
          <entry><literal>'w'</literal></entry>
          <entry>
           Otwiera tylko do zapisu; umieszcza wska¼nik pliku na jego pocz±tku
           i obcina plik do zerowej d³ugo¶ci. Je¶li plik nie istnieje to
	   próbuje go utworzyæ.
          </entry>
         </row>
         <row>
          <entry><literal>'w+'</literal></entry>
          <entry>
           Otwiera do odczytu i zapisu; umieszcza wska¼nik pliku na jego pocz±tku
	   i obcina plik do zerowej d³ugo¶ci. Je¶li plik nie istnieje to
	   próbuje go utworzyæ.
          </entry>
         </row>
         <row>
          <entry><literal>'a'</literal></entry>
          <entry>
	   Otwiera tylko do zapisu; umieszcza wska¼nik pliku na jego koñcu.
	   Je¶li plik nie istnieje to próbuje go utworzyæ.
          </entry>
         </row>
         <row>
          <entry><literal>'a+'</literal></entry>
          <entry>
           Otwiera do odczytu i zapisu; umieszcza wska¼nik pliku na jego koñcu.
	   Je¶li plik nie istnieje to próbuje go utworzyæ.
          </entry>
         </row>
         <row>
          <entry><literal>'x'</literal></entry>
          <entry>
	   Tworzy i otwiera plik tylko do zapisu; umieszcza wska¼nik pliku na
	   jego pocz±tku. Je¶li plik juz istnieje, wywo³anie <function>fopen</function>
	   nie powiedzie siê, zwróci &false; i wygeneruje b³±d na poziomie
	   <constant>E_WARNING</constant>. Je¶li plik nie istnieje, spróbuje go
	   utworzyæ. To jest równowa¿ne z okre¶leniem flag <literal>O_EXCL|O_CREAT</literal>
           stosowanym w wywo³aniu systemowym <literal>open(2)</literal>.
          </entry>
         </row>
         <row>
          <entry><literal>'x+'</literal></entry>
          <entry>
           Tworzy i otwiera plik odczytu i zapisu; umieszcza wska¼nik pliku na
           jego pocz±tku. Je¶li plik juz istnieje, wywo³anie <function>fopen</function>
           nie powiedzie siê, zwróci &false; i wygeneruje b³±d na poziomie
           <constant>E_WARNING</constant>. Je¶li plik nie istnieje, spróbuje go
           utworzyæ. To jest równowa¿ne z okresleniem flag <literal>O_EXCL|O_CREAT</literal>
           stosowanym w wywo³aniu systemowym <literal>open(2)</literal>.
	  </entry>
         </row>
        </tbody>
       </tgroup>
      </table>
     </para>
     <note> 
      <para>
       Ró¿ne rodziny systemów operacyjnych stosuja rózne konwencje koñca lini.
       Kiedy zapisujesz plik tekstowy i chcesz wstawiæ ³amanie lini, musisz
       u¿yæ poprawnych dla twojego systemu operacyjnego znak(ów) koñca lini.
       Systemy bazuj±ce na Uniksie u¿ywaj± <literal>\n</literal> jako
       znaku koñca lini, systemy bazuj±ce na Windowsie u¿ywaj± <literal>\r\n</literal>
       jako znaków koñca lini, a systemy Macintosh u¿ywaj± <literal>\r</literal>
       jako znak koñca lini.
      </para>
      <para>
       Je¶li u¿yjesz nieprawid³owego koñca lini do zapisu pliku, mo¿esz
       zaobserwowaæ, w innych aplikacjach otwieraj±c ten plik, ¿e "wygl±da on
       zabawnie".
      </para>
      <para>
       Windows oferuje flagê (<literal>'t'</literal>) konwertuj±c± tryb tekstowy,
       która przezroczy¶cie przek³ada <literal>\n</literal> na
       <literal>\r\n</literal> kiedy pracujesz z plikiem. Dla kontrastu, mo¿esz
       tak¿e uzyæ <literal>'b'</literal> aby wymusiæ tryb binarny, wtedy
       nie bêdzie konwertowaæ twoich danych. Aby u¿yæ tych flag, wstaw
       <literal>'b'</literal> lub <literal>'t'</literal> jako ostatni
       znak w parametrze <parameter>tryb</parameter>.
      </para>
      <para>
       Domy¶lnie tryb konwersji zale¿y od SAPI i wersji PHP jakiej u¿ywasz,
       wiêc namawiamy aby zawsze podawaæ stosown± flage w celu przeno¶no¶ci.
       Powiniene¶ u¿yæ trybu <literal>'t'</literal> je¶li pracujesz ze
       zwyk³ymi plikami tekstowymi (plain-text)i u¿ywasz  <literal>\n</literal>
       do ograniczenia konców lini w twoim skrypcie, ale wymagasz aby twój
       plik by³ czytelny w aplikacjach takich jak notatnik. Powiniene¶ uzyæ
       <literal>'b'</literal> w ka¿dym innym przypadku.
      </para>
      <para>
       Je¶li nie podasz flagi 'b' kiedy pracujesz na binarnych plikach, mo¿esz
       do¶wiadczyæ dziwnych problemów z twoimi danymi, w³±czaj±c uszkodzone pliki
       graficzne i dziwne problemy ze znakami <literal>\r\n</literal>.
      </para>
     </note>
     <note>
      <para>
       Dla przeno¶no¶ci, bardzo zalecane jest u¿ycie zawsze flagi 'b'
       kiedy otwierasz pliki za pomoc± <function>fopen</function>.
      </para>
     </note>
     <note>
      <para>
       Ponownie, dla przeno¶no¶ci, jest równie¿ bardzo zalecane aby¶,
       przepisa³ swój kod, który u¿ywa lub polega na trybie <literal>'t'</literal>
       tak aby u¿ywa³ poprawnego koñca lini oraz trybu <literal>'b'</literal>.
      </para>
     </note>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><parameter>u¿yj_include_path</parameter></term>
     <listitem>
      <para>
       Opcjonalny trzeci parametr <parameter>u¿yj_include_path</parameter>
       mo¿e byæ ustawiony na '1' lub &true; je¶li chcesz szukaæ pliku tak¿e w 
       <link linkend="ini.include-path">include_path</link>.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>kontekst</parameter></term>
     <listitem>
      &note.context-support;
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Zwraca wska¼nik pliku do zasobu w przypadku sukcesu lub &false; przy b³êdzie.
  </para>
 </refsect1>

 <refsect1 role="errors">
  &reftitle.errors;
  <para>
   Je¶li otwieranie siê nie powiedzie, funkcja wygeneruje b³±d na poziomie 
   <constant>E_WARNING</constant>. Mo¿esz u¿yæ <link linkend="language.operators.errorcontrol">@</link> aby
   zatuszowaæ to ostrze¿enie.
  </para>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>4.3.2</entry>
       <entry>
        Od PHP 4.3.2 domy¶lny tryb ustawiany jest na binarny, dla wszystkich
        platform, które rozró¿niaj± tryby binarne i tekstowe. Je¶li masz
        problemy ze skryptem po aktualizacji, spróbuj u¿yæ flagi <literal>'t'</literal>
	jako obej¶cie dopóki nie uczynisz Twojego skryptu bardziej przeno¶nym
	jak opisano ni¿ej.
       </entry>
      </row>
      <row>
       <entry>4.3.2</entry>
       <entry>
        Dodano opcje <literal>'x'</literal> i <literal>'x+'</literal>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title><function>fopen</function> przyk³ady</title>
     <programlisting role="php">
<![CDATA[
<?php
$handle = fopen("/home/rasmus/plik.txt", "r");
$handle = fopen("/home/rasmus/plik.gif", "wb");
$handle = fopen("http://www.przyklad.com/", "r");
$handle = fopen("ftp://uzytkownik:haslo@przyklad.com/jakisplik.txt", "w");
?>
]]>
    </programlisting>
   </example>
  </para>
 </refsect1>

 <refsect1 role="notes">
  &reftitle.notes;
  &warn.ssl-non-standard;
  &note.sm.uidcheck.dir;
  <para>
   Je¶li do¶wiadczasz problemów z odczytem lub zapisywaniem do plików i
   u¿ywasz PHP w postaci modu³u serwera, pamiêtaj, ¿eby siê upewniæ, ¿e
   pliki i katalogi, których u¿ywasz s± dostêpne dla procesu serwera.
  </para>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><xref linkend="wrappers"/></member>
    <member><function>fclose</function></member>
    <member><function>fgets</function></member>
    <member><function>fread</function></member>
    <member><function>fwrite</function></member>
    <member><function>fsockopen</function></member>
    <member><function>file</function></member>
    <member><function>file_exists</function></member>
    <member><function>is_readable</function></member>
    <member><function>stream_set_timeout</function></member>
    <member><function>popen</function></member>
    <member><function>stream_context_create</function></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
