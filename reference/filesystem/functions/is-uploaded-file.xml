<?xml version="1.0" encoding="iso-8859-2"?>
<!-- EN-Revision: 1.7 Maintainer: adi Status: ready -->
<!-- $Revision: 1.7 $ -->
  <refentry id="function.is-uploaded-file">
   <refnamediv>
    <refname>is_uploaded_file</refname>
    <refpurpose>Mówi czy plik zosta³ przys³any przez HTTP POST.</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Opis</title>
    <methodsynopsis>
     <type>bool</type><methodname>is_uploaded_file</methodname>
     <methodparam><type>string</type><parameter>nazwa_pliku</parameter></methodparam>
    </methodsynopsis>
    <para>
     Zwraca &true; je¶li plik o nazwie <parameter>nazwa_pliku</parameter>
     zosta³ przys³any (upload) przez HTTP POST. To pomaga upewniæ siê,
     czy z³o¶liwy u¿ytkownik nie próbuje oszukaæ skryptu pracuj±cego
     na plikach, tak aby dzia³a³ on na plikach na których nie powinien
     -- na przyk³ad
     <filename>/etc/passwd</filename>.
    </para>
    <para>
     Ten rodzaj testów jest szczególnie wa¿ny je¶li istnieje szansa, ¿e
     cokolwiek robimy z przys³anymi plikami mo¿e zdradziæ ich
     tre¶æ u¿ytkownikowi lub nawet innym u¿ytkownikom tego samego
     systemu.
    </para>
	<para>
	 Do prawid³owego dzia³ania, funkcja <function>is_uploaded_file</function>
	 wymaga argumentu jak $_FILES['userfile']['tmp_name'], - nazwa przysy³anego
	 pliku na maszynie klienta $_FILES['userfile']['name'] nie zadzia³a.
	</para> 
	 <example> 
       <title><function>is_uploaded_file</function> przyk³ad</title> 
       <programlisting role="php"> 
  <![CDATA[ 
  <?php 
    
  if (is_uploaded_file($_FILES['userfile']['tmp_name'])) { 
     echo "File ". $_FILES['userfile']['name'] ." upload prawid³owy.\n"; 
     echo "Wy¶wietlam tre¶æ\n"; 
     readfile($_FILES['userfile']['tmp_name']); 
  } else { 
     echo "Mo¿liwy atak przez uploadowanie pliku: "; 
     echo "Plik '". $_FILES['userfile']['tmp_name'] . "'."; 
  } 
    
  ?>]]> 
       </programlisting> 
      </example> 
      <para> 
    <function>is_uploaded_file</function> jest dostêpna tylko w wersjach
     PHP 3 pó¼niejszych od PHP 3.0.16, i wersjach PHP 4 pó¼niejszych od 4.0.2.
     Je¶li utkno³e¶ przy u¿ywaniu wcze¶niejszej wersji, mo¿esz u¿yæ poni¿szej
     funkcji w celu pomocy w zabezpieczeniu siebie:
     <note>
      <para>
       Poni¿szy przyk³ad <emphasis>nie</emphasis> zadzia³a w wersjach
       PHP 4 pó¼niejszych od 4.0.2. To jest spowodowane zmian± wewnêtrznej
       funkcjonalno¶ci PHP po tej wersji.
      </para>
     </note>
	  </para> 
       <example> 
        <title><function>is_uploaded_file</function> przyk³ad dla PHP 4 &lt; 4.0.3</title> 
     <programlisting role="php">
<![CDATA[
<?php
/* Test po stronie u¿ytkownika na uploadowany plik */
 function is_uploaded_file_4_0_2($filename)  
  {  
    if (!$tmp_file = get_cfg_var('upload_tmp_dir')) {
        $tmp_file = dirname(tempnam('', ''));
    }
    $tmp_file .= '/' . basename($filename);
    /* U¿ytkownik mo¿e mieæ zamykaj±cy uko¶nik w php.ini... */
    return (ereg_replace('/+', '/', $tmp_file) == $filename);
}

/* Jak u¿yæ tej funkcji, w starych wersjach nie masz tak¿e
 * move_uploaded_file(): */
if (is_uploaded_file_4_0_2($HTTP_POST_FILES['userfile'])) {
    copy($HTTP_POST_FILES['userfile'], "/place/to/put/uploaded/file");
} else {
    echo "Prawdopodobny atak przez uploadowanie pliku: '$HTTP_POST_FILES[userfile]'.";
}
?>
]]>
     </programlisting>
    </example>
    <para>
     Patrz tak¿e: <function>move_uploaded_file</function> i rozdzia³
     <link linkend="features.file-upload">Obs³uga uploadowanych plików</link>
     w celu uzyskania prostych przyk³adów u¿ycia tej funkcji.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
