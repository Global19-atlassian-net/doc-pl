<?xml version="1.0" encoding="iso-8859-2"?>
<!-- EN-Revision: 1.37 Maintainer: qrak Status: ready -->
<!-- $Revision: 1.13 $ -->
<!-- CREDITS: joeaccord -->
<refentry xml:id="function.mail" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>mail</refname>
  <refpurpose>Wysy³anie poczty elektronicznej</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>bool</type><methodname>mail</methodname>
   <methodparam><type>string</type><parameter>do</parameter></methodparam>
   <methodparam><type>string</type><parameter>temat</parameter></methodparam>
   <methodparam><type>string</type><parameter>tre¶æ</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>dodatkowe_nag³ówki</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>dodatkowe_parametry</parameter></methodparam>
  </methodsynopsis>
  <para>
   Wysy³a e-mail.
  </para>
 </refsect1>

 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>do</parameter></term>
     <listitem>
      <para>
       Odbiorca lub odbiorcy e-maila.
      </para>
      <para>
       Format tego ³añcucha musi byæ zgodny z
       <link xlink:href="&url.rfc;2822">RFC 2822</link>. Oto kilka przyk³adów:
       <simplelist>
        <member>osoba@example.com</member>
        <member>osoba@example.com, imie.nazwisko@example.com</member>
        <member>Osoba &lt;osoba@example.com&gt;</member>
        <member>Osoba &lt;osoba@example.com&gt;, Inna osoba &lt;ktokolwiek@example.com&gt;</member>
       </simplelist>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>temat</parameter></term>
     <listitem>
      <para>
       Temat e-maila.
      </para>
      <caution>
       <para>
        Nie mo¿e zawieraæ znaków przej¶cia do nowej linii, bo e-mail mo¿e
        zostaæ wys³any nieprawid³owo.
       </para>
      </caution>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>tre¶æ</parameter></term>
     <listitem>
      <para>
       Tre¶æ wiadomo¶ci.
      </para>
      <para>
       Ka¿dy wiersz tekstu powinien byæ zakoñczony znakiem koñca linii LF (\n).
       Wiersze nie powinny zawieraæ wiêcej ni¿ 70 znaków.
      </para>
      <caution>
       <para>
        (Tylko dla Windows) Kiedy PHP ³aczy siê bezpo¶rednio do serwera SMTP
        i zostan± znalezione znaki wskazuj±ce na koniec wiadomo¶ci (\n.)
        to zostan± one usuniête, co spowoduje ¿e wiadomo¶æ bêdzie ma³o czytelna.
        Aby temu zapobiec, nale¿y dodaæ dodatkow± kropkê.
        <programlisting role="php">
<![CDATA[
<?php
$text = str_replace("\n.", "\n..", $text);
?>
]]>
        </programlisting>
       </para>
      </caution>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>dodatkowe_nag³ówki</parameter> (opcjonalnie)</term>
     <listitem>
      <para>
       £añcuchy znaków dodane na koñcu nag³ówka e-maila.
      </para>
      <para>
       Parametr jest zazwyczaj wykorzystywany do wstawienia dodatkowych
       nag³ówków (From, Cc, oraz Bcc). Dodatkowe nag³ówki rozdziela siê
       przy pomocy znaku powrotu karetki i nowego wiersza - CRLF (\r\n).
      </para>
      <note>
       <para>
        Ka¿dy e-mail <emphasis>musi</emphasis> zawieraæ nag³ówek
        <literal>From</literal>. Mo¿na go podawaæ jako parametr
        <parameter>dodatkowe_nag³ówki</parameter> albo ustawiæ
        w pliku &php.ini;.
       </para>
       <para>
        Wynikiem pominiêcia tego nag³ówka bêdzie informacja o b³êdzie,
        podobna do tej: <literal>Warning: mail(): "sendmail_from" not
        set in php.ini or custom "From:" header missing</literal>.
        W Windows nag³ówek <literal>From</literal> ustawia tak¿e
        <literal>Return-Path</literal>.
       </para>
      </note>
      <note>
       <para>
        Je¶li wiadomo¶ci nie s± dostarczane, mo¿na spróbowaæ u¿ywaæ
        tylko znaku LF (\n). Niektóre, gorzej napisane MTA na systemy
        Unix zamieniaj± automatycznie LF na CRLF (co powoduje
        podwojenie CR je¶li zosta³o u¿yte CRLF). Powinno siê to zrobiæ
        w ostateczno¶ci, jako ¿e nie jest to zgodne z dokumentem
        <link xlink:href="&url.rfc;2822">RFC 2822</link>.
       </para>
      </note>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>dodatkowe_parametry</parameter> (opcjonalne)</term>
     <listitem>
      <para>
       Parametr <parameter>dodatkowe_parametry</parameter> mo¿e byæ u¿yty
       do przekazania dodatkowych opcji do programu wysy³aj±cego e-maile.
       Zostan± one u¿yte przy wysy³aniu e-maila w <literal>¶cie¿ce sendmaila</literal>
       jako ustawienia konfiguracyjne. Mog± one byæ u¿yte na przyk³ad do
       wprowadzenia adresu e-mail nadawcy, tak jakby¶my u¿yli polecenia
       sendmail z opcj± <literal>-f</literal>.
      </para>
      <para>
       U¿ytkownik z prawami którego jest uruchomiony serwer www powinien byæ dodany
       jako zaufany u¿ytkownik w konfiguracji programu sendmail, aby zapobiec
       dodawania nag³ówka 'X-Warning' do wiadomo¶ci, kiedy ustawiany jest adres
       nadawcy (-f). Dla u¿ytkowników programu sendmail jest to plik
       <filename>/etc/mail/trusted-users</filename>.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Zwraca &true; je¶li e-mail zosta³ zaakceptowany do wys³ania, w przeciwnym
   przypadku zwraca &false;.
  </para>
  <para>
   Wa¿n± informacj± jest to, ¿e pomimo i¿ e-mail zosta³ zaakceptowany do wys³ania,
   to NIE oznacza, ¿e bêdzie on ju¿ w tej chwili wysy³any do odbiorców.
  </para>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <para>
   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>&Version;</entry>
       <entry>&Description;</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>4.3.0 (tylko Windows)</entry>
       <entry>
        Obs³ugiwane s± wszystkie dodatkowe nag³ówki (takie jak From, Cc, Bcc
        i Date) i nie s± w nich rozró¿niane ma³e i du¿e litery.
        (dodatkowe nag³ówki nie by³y przetwarzane bezpo¶rednio przez MTA, tylko
        wcze¶niej parsowane za pomoc± PHP, a PHP &lt; 4.3 obs³ugiwa³ tylko
        nag³ówek Cc i rozró¿nia³ ma³e i du¿e litery).
       </entry>
      </row>
      <row>
       <entry>4.2.3</entry>
       <entry>
        Parametr <parameter>dodatkowe_parametry</parameter> jest wy³±czony
        w trybie <link linkend="ini.safe-mode">safe_mode</link>, a funkcja
        <function>mail</function> wywo³uje stosowny komunikat
        i zwraca &false; w czasie próby jego u¿ycia.
       </entry>
      </row>
      <row>
       <entry>4.0.5</entry>
       <entry>
        Dodano parametr <parameter>dodatkowe_parametry</parameter>.
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Wys³anie e-maila.</title>
    <para>
     U¿ycie funkcji <function>mail</function> do wys³ania prostej wiadomo¶ci:
    </para>
    <programlisting role="php">
<![CDATA[
<?php
// Wiadomo¶æ
$message = "Line 1\nLine 2\nLine 3";

// W przypadku ka¿dej linii d³u¿szej ni¿ 70 znaków powinni¶my u¿yæ funkcji wordwrap()
$message = wordwrap($message, 70);

// Wy¶lij
mail('caffinated@example.com', 'My Subject', $message);
?>
]]>
    </programlisting>
   </example>
   <example>
    <title>ys³anie e-maila z dodatkowymi nag³ówkami.</title>
    <para>
     Dodatkowe, podstawowe nag³ówki informuj± MUA
     o adresach From i Reply-To:
    </para>
    <programlisting role="php">
<![CDATA[
<?php
$to      = 'osoba@example.com';
$subject = 'temat';
$message = 'witam';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?>
]]>
    </programlisting>
   </example>
   <example>
    <title>Wys³anie e-maila z dodatkowym parametrem wiersza poleceñ.</title>
    <para>
     Parametr <parameter>dodatkowe_parametry</parameter> mo¿e byæ u¿yty
     do przekazania dodatkowych opcji do programu wysy³aj±cego e-maile.
     Zostan± one u¿yte przy wysy³aniu e-maila w <literal>¶cie¿ce sendmaila</literal>.
    </para>
    <programlisting role="php">
<![CDATA[
<?php
mail('osoba@example.com', 'temat', 'wiadomo¶æ', null,
   '-fwebmaster@example.com');
?>
]]>
    </programlisting>
   </example>
   <example>
    <title>Wys³anie e-maila w formacie HTML</title>
    <para>
     Za pomoc± <function>mail</function> mo¿liwe jest wys³anie tre¶ci HTML.
    </para>
    <programlisting role="php">
<![CDATA[
<?php
// kilku odbiorców
$to  = 'aidan@example.com' . ', '; // zwróæmy uwagê na przecinek
$to .= 'wez@example.com';

// temat
$subject = 'Birthday Reminders for August';

// wiadomo¶æ
$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
      <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
    </tr>
    <tr>
      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// Aby wys³aæ e-mail HTML, musi byæ ustawiony nag³ówek Content-type
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Dodatkowe nag³ówki
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Wys³anie e-maila
mail($to, $subject, $message, $headers);
?>
]]>
    </programlisting>
    <para>
     <note>
      <para>
       Je¶li mamy zamiar wysy³aæ HTML albo e-maile o z³o¿onej zawarto¶ci, zaleca siê
       u¿yæ pakietu PEAR <link xlink:href="&url.pear.package;Mail_Mime">PEAR::Mail_Mime</link>.
      </para>
     </note>
    </para>
   </example>
  </para>
 </refsect1>

 <refsect1 role="notes">
  &reftitle.notes;
  <note>
   <para>
    Implementacja funkcji <function>mail</function> w systemach Windows
    ró¿ni siê pod wieloma wzglêdami od implementacji na platformach Unix.
    Po pierwsze, do tworzenia wiadomo¶ci funkcja nie u¿ywa lokalnych poleceñ
    systemowych, tylko operuje bezpo¶rednio na gniazdach. To oznacza, ¿e
    wymagana jest dodatkowa us³uga <literal>MTA</literal>, nas³uchuj±ca na
    porcie (która mo¿e dzia³aæ na localhost lub maszynie zdalnej).
   </para>
   <para>
    Dodatkowe nag³ówki, takie jak
    <literal>From:</literal>,
    <literal>Cc:</literal>,
    <literal>Bcc:</literal> i
    <literal>Date:</literal>
    <emphasis role="strong">nie s±</emphasis> przetwarzane przez
    <literal>MTA</literal>, tylko parsowane za pomoc± PHP.
   </para>
   <para>
    Parametr <parameter>do</parameter> nie powinien byæ adresem
    w postaci &quot;Osoba &lt;ktokolwiek@example.com&gt;&quot;. Polecenie
    mail mo¿e nie parsowaæ tego w³a¶ciwie, podczas komunikowania siê
    z MTA.
   </para>
  </note>

  <note>
   <para>
    Za pomoc± tej funkcji mo¿na wysy³aæ e-maile z za³±cznikami i specjalnie
    formatowanymi typami tre¶ci (np. HTML). Jest to realizowane poprzez
    kodowanie MIME - wiêcej informacji na ten temat znajduje siê na witrynie
    <link xlink:href="&url.email.mime.zend;">
    artyku³ Zend</link> oraz <link xlink:href="&url.pear.package;Mail_Mime">
    PEAR Mime Classes</link>.
   </para>
  </note>

  <note>
   <para>
    Nie warto u¿ywaæ funkcji <function>mail</function> do wysy³ania du¿ej
    ilo¶ci e-maili stosuj±c pêtle. Ta funkcja otwiera i zamyka gniazdo SMTP
    dla ka¿dego wysy³anego e-maila, a to jest ma³o wydajne.
   </para>
   <para>
    Do wysy³ania du¿ej ilo¶ci e-maili mo¿na stosowaæ pakiety
    <link xlink:href="&url.pear.package;Mail">PEAR::Mail</link>, i
    <link xlink:href="&url.pear.package;Mail_Queue">PEAR::Mail_Queue</link>.
   </para>
  </note>

  <note>
   <para>
    Poni¿sze dokumenty RFC mog± byæ pomocne:
    <link xlink:href="&url.rfc;1896">RFC 1896</link>,
    <link xlink:href="&url.rfc;2045">RFC 2045</link>,
    <link xlink:href="&url.rfc;2046">RFC 2046</link>,
    <link xlink:href="&url.rfc;2047">RFC 2047</link>,
    <link xlink:href="&url.rfc;2048">RFC 2048</link>,
    <link xlink:href="&url.rfc;2049">RFC 2049</link>, i
    <link xlink:href="&url.rfc;2822">RFC 2822</link>.
   </para>
  </note>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>imap_mail</function></member>
    <member><link xlink:href="&url.pear.package;Mail">PEAR::Mail</link></member>
    <member><link xlink:href="&url.pear.package;Mail_Mime">PEAR::Mail_Mime</link></member>
   </simplelist>
  </para>
 </refsect1>
</refentry>


<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
