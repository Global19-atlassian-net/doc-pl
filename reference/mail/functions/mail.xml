<?xml version="1.0" encoding="iso-8859-2"?>
<!-- EN-Revision: 1.14 Maintainer: qrak Status: ready -->
<!-- $Revision: 1.11 $ -->
  <refentry xml:id="function.mail" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
   <refnamediv>
    <refname>mail</refname>
    <refpurpose>Wysy³a e-maila</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Opis</title>
     <methodsynopsis>
      <type>bool</type><methodname>mail</methodname>
      <methodparam><type>string</type><parameter>do</parameter></methodparam>
      <methodparam><type>string</type><parameter>temat</parameter></methodparam>
      <methodparam><type>string</type><parameter>tre¶æ</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>dodatkowe_nag³ówki</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>dodatkowe_parametry</parameter></methodparam>
     </methodsynopsis>
    <simpara>
     <function>mail</function> automatycznie wysy³a wiadomo¶æ
     okre¶lon± w <parameter>tre¶æ</parameter> do odbiorcy
     okre¶lonego w <parameter>do</parameter>. Mo¿na wys³aæ wiadomo¶æ do kilku
     odbiorców na raz, wypisuj±c ich adresy po przecinku w argumencie
     <parameter>do</parameter>.  Poprzez tê funkcjê mo¿na te¿ wys³aæ listy
     zawieraj±ce za³±czniki lub inne typy wiadomo¶ci. Jest to mo¿liwe dziêki
     kodowaniu MIME - po wiêcej informacji, zajrzyj
     <link url="http://www.zend.com/zend/spotlight/sendmimeemailpart1.php"
     >http://www.zend.com/zend/spotlight/sendmimeemailpart1.php</link> lub
     <link xlink:href="&url.email.mime.pear;">Klasy Mime PEAR</link>.
    </simpara>
    <simpara>
       Zapoznanie siê z poni¿szymi RFC mo¿e byæ przydatne:  
       <link xlink:href="&url.rfc1896;">RFC 1896</link>,  
       <link xlink:href="&url.rfc2045;">RFC 2045</link>,  
       <link xlink:href="&url.rfc2046;">RFC 2046</link>,  
       <link xlink:href="&url.rfc2047;">RFC 2047</link>,  
       <link xlink:href="&url.rfc2048;">RFC 2048</link> i  
       <link xlink:href="&url.rfc2049;">RFC 2049</link>.  
    </simpara>
    <para>
     <function>mail</function> zwraca &true; je¶li e-mail zosta³ zaakceptowany
     przez przeka¼nik pocztowy do wys³ania lub &false; w przeciwnym wypadku.
    </para>
    <warning>
     <para>
      Implementacja funkcji <function>mail</function> w systemie Windows ró¿ni
      siê od implementacji w systemie Unix.
      
      Po pierwsze, funkcja nie u¿ywa
      lokalnych programów do komponowania wiadomo¶ci pocztowych, tylko operuje
      na po³±czeniach socketowych, co oznacza, ¿e do dzia³ania potrzebny
      jest Agent Transferu Poczty (<literal>MTA</literal>), który nas³uchuje
      na odpowiednim porcie. (Agent mo¿e znajdowaæ siê zarówno na maszynie
      lokalnej, jak i zdalnej).
      
      Po drugie, nag³ówki u¿ytkownika, takie jak
      <literal>From:</literal>, <literal>Cc:</literal>, <literal>Bcc:</literal>
      oraz <literal>Date:</literal> <emphasis role="strong">nie</emphasis>
      s± w pierwszej kolejno¶ci interpretowane przez <literal>MTA</literal>,
      gdy¿ wcze¶niej s± parsowane przez <literal>PHP</literal>.
      <literal>PHP</literal> &lt; 4.3 obs³ugiwa³ spo¶ród wy¿ej wymienionych
      tylko nag³ówek <literal>Cc:</literal> (wymagana by³a odpowiednia wielko¶æ
      liter); natomiast <literal>PHP</literal> &lt;= 4.3 obs³uguje ju¿ wszystkie
      wy¿ej wymienione nag³ówki i nie wymaga odpowiedniej wielko¶ci liter.
     </para>
    </warning>
    <para>
     <example>
      <title>Wysy³anie e-maila</title>
      <programlisting>
<![CDATA[
mail("joecool@example.com", "Temat listu", "Linia 1\nLinia 2\nLinia 3");
]]>
      </programlisting>
     </example>
    </para>
    <simpara>
     Je¶li zostanie podany czwarty argument, bêdzie on dopisany na koñcu
     nag³ówka wiadomo¶ci. Ten argument wykorzystuje siê do wstawienia
     dodatkowych nag³ówków.
     Dodatkowe nag³ówki rozdziela siê znakiem powrotu karetki i nowego wiersza.
    </simpara>
    <note>
     <para>
     Aby rozdzieliæ nag³ówki, trzeba u¿yæ sekwencji <literal>\r\n</literal>,
     chocia¿ niektóre uniksowe agenty pocztowe obs³uguj± tak¿e pojedynczy
     znak nowej linii (<literal>\n</literal>). 
     </para>
    </note>
    <para>
     <example>
      <title>Wysy³anie listu z dodatkowymi nag³ówkami.</title>
      <programlisting>
<![CDATA[
mail("nobody@example.com", "temat", $wiadomosc,
     "From: webmaster@$SERVER_NAME\r\n"
    ."Reply-To: webmaster@$SERVER_NAME\r\n"
    ."X-Mailer: PHP/" . phpversion());
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Argumentu <parameter>dodatkowe_parametry</parameter> u¿ywa siê do
     przekazania dodatkowego paramteru do programu wysy³aj±cego pocztê
     skonfigurowanego w dyrektywie <literal>sendmail_path</literal>.
     U¿ywa siê tego na przyk³ad do ustawienia adresu zwrotnego koperty 
     (envelope sender adress) przy wysy³aniu
     listu za pomoc± sendmaila. Mo¿esz byæ zmuszony dodaæ u¿ytkownika jakim
     jest twój serwer www do listy zaufanych u¿ytkowników w pliku
     konfiguracyjnym sendmaila, aby sendmail nie doda³ nag³ówka "X-warning" do
     wiadomo¶ci przy wysy³aniu koperty (envelope) t± metod±.  
     <example>
      <title>Wysy³anie listu z dodatkowymi nag³ówkami i prze³±cznikami.</title>
      <programlisting>
<![CDATA[
mail("nobody@example.com", "temat", $wiadomosc,
     "From: webmaster@$SERVER_NAME", "-fwebmaster@$SERVER_NAME");
]]>
      </programlisting>
     </example>
     </para>
     <note>
      <para>
       Pi±ty argument funkcji <function>mail</function> zosta³ dodany w 
       PHP 4.0.5. Pocz±wszy od PHP 4.2.3 argument ten jest zablokowany w
       <link linkend="ini.safe-mode">trybie bezpiecznym</link>. W przypadku
       próby u¿ycia, funkcja <function>mail</function> wygeneruje ostrze¿enie
       i zwróci &false;.
      </para>
     </note>
     <para>
     Mo¿na tez u¿yæ zwyk³ych operacji na ³añcuchach znaków do tworzenia
     z³o¿onych wiadomo¶ci e-mail.
     <example>
      <title>Wysy³anie z³o¿onego e-maila.</title>
      <programlisting>
<![CDATA[
/* adresaci */
$do  = "Marysia <marysia@example.com>" . ", " ; // zwróc uwagê na przecinek
$do .= "Kasia <kasia@example.com>";

/* temat */
$temat = "Przypomnienie o urodzinach w Sierpniu";

/* wiadomo¶æ */
$wiadomosc = '
<html>
<head>
 <title>Przypomnienie o urodzinach w Sierpniu</title>
</head>
<body>
<p>Te urodziny bêdziemy ¶wiêtowaæ w Sierpniu!</p>
<table>
 <tr>
  <th>Osoba</th><th>Dzieñ</th><th>Miesi±c</th><th>Rok</th>
 </tr>
 <tr>
  <td>Jan</td><td>3.</td><td>Sierpnia</td><td>1970</td>
 </tr>
 <tr>
  <td>Szymon</td><td>17.</td><td>Sierpnia</td><td>1973</td>
 </tr>
</table>
</body>
</html>
';

/* Aby wys³aæ e-mail w formacie HTML, nale¿y ustawiæ nag³ówek Content-type. */
$naglowki  = "MIME-Version: 1.0\r\n";
$naglowki .= "Content-type: text/html; charset=iso-8859-1\r\n";

/* dodatkowe nag³ówki */
$naglowki .= "From: Przypominacz o urodzinach <urodziny@example.com>\r\n";

$naglowki .= "Cc: archiwum_mailingu@example.com\r\n";
$naglowki .= "Bcc: kontrola_mailingu@example.com\r\n";

/* a teraz wy¶lij */
mail($do, $temat, $wiadomosc, $naglowki);
]]>
      </programlisting>
     </example>
    </para>
    <note>
     <para>
      Upewnij siê, ¿e nie ma ¿adnych znaków nowej linii w argumencie
      <parameter>do</parameter> lub <parameter>temat</parameter>,
      gdy¿ w przeciwnym razie, e-mail mo¿e nie byæ wys³any poprawnie.
     </para>
    </note>
    <note>
     <para>
      Argument <parameter>do</parameter> nie mo¿e byæ adresem w postaci
      &quot;Kto¶tam &lt;someone@example.com&gt;&quot;. Funkcja
      <function>mail</function> nie przetworzy prawid³owo takiego adresu w
      czasie transakcji z Agentem Transferu Poczty (MTA).
     </para>
    </note>
    <para>
     Patrz tak¿e: <function>imap_mail</function>.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
